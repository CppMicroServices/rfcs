<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="192px" preserveAspectRatio="none" style="width:938px;height:192px;background:#FFFFFF;" version="1.1" viewBox="0 0 938 192" width="938px" zoomAndPan="magnify"><defs><filter height="300%" id="f5drk9dkjjsvv" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[77b0ea1454fe7a7546e2e8ed5acd0c75]
entity BE--><rect fill="#FEFECE" filter="url(#f5drk9dkjjsvv)" height="37.6094" style="stroke:#000000;stroke-width:1.5;" width="100" x="7" y="8.3564"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="17" y="32.8896">BundleEvent</text><!--MD5=[7050851d0b859af5d78dd8a93741a497]
entity BL--><rect fill="#FEFECE" filter="url(#f5drk9dkjjsvv)" height="37.6094" style="stroke:#000000;stroke-width:1.5;" width="115" x="227.5" y="8.3564"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="237.5" y="32.8896">BundleListener</text><!--MD5=[92e1b8d0a4b2a37ccd7fcd96c5dfe02c]
entity TB--><rect fill="#FEFECE" filter="url(#f5drk9dkjjsvv)" height="37.6094" style="stroke:#000000;stroke-width:1.5;" width="116" x="478" y="8.3564"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="488" y="32.8896">TrackedBundle</text><!--MD5=[bf47ed657672796465dc76c4ef1ad49d]
entity BAT--><rect fill="#FEFECE" filter="url(#f5drk9dkjjsvv)" height="37.6094" style="stroke:#000000;stroke-width:1.5;" width="168" x="758" y="8.3564"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="768" y="32.8896">BundleAbstractTracked</text><!--MD5=[6815a7c98912f1a3feb5ab6a43f68320]
entity BTC--><rect fill="#FEFECE" filter="url(#f5drk9dkjjsvv)" height="37.6094" style="stroke:#000000;stroke-width:1.5;" width="183" x="444.5" y="134.8564"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163" x="454.5" y="159.3896">BundleTrackerCustomizer</text><path d="M775.5,124.3564 L775.5,183.4111 A0,0 0 0 0 775.5,183.4111 L908.5,183.4111 A0,0 0 0 0 908.5,183.4111 L908.5,134.3564 L898.5,124.3564 L846,124.3564 L842,46.4564 L838,124.3564 L775.5,124.3564 A0,0 0 0 0 775.5,124.3564 " fill="#FBFB77" filter="url(#f5drk9dkjjsvv)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M898.5,124.3564 L898.5,134.3564 L908.5,134.3564 L898.5,124.3564 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="781.5" y="142.8516">Bundle is in map</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="781.5" y="159.2031">Leaving state mask</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="781.5" y="175.5547">Increment count</text><!--MD5=[2362f1ef991bbeef86520282c353631e]
link BE to BL--><path d="M107.04,27.3564 C140.89,27.3564 185.88,27.3564 222.16,27.3564 " fill="none" id="BE-to-BL" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="227.44,27.3564,218.44,23.3564,222.44,27.3564,218.44,31.3564,227.44,27.3564" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="125.25" y="20.8516">Intercept event</text><!--MD5=[55c3e068c1f8961ed2fb97aa58d44eac]
link BL to TB--><path d="M342.58,27.3564 C381.37,27.3564 432.54,27.3564 472.5,27.3564 " fill="none" id="BL-to-TB" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="477.81,27.3564,468.81,23.3564,472.81,27.3564,468.81,31.3564,477.81,27.3564" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="360.75" y="20.8516">BundleChanged()</text><!--MD5=[cacacb7581613e5b42688c4f9585ce2a]
link TB to BAT--><path d="M594.14,39.7064 C613.41,43.2464 635.04,46.6064 655,48.3564 C686.84,51.1464 721.66,48.7364 752.53,44.6864 " fill="none" id="TB-to-BAT" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="757.84,43.9764,748.3846,41.2206,752.8852,44.6476,749.4583,49.1482,757.84,43.9764" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="656" y="44.8516">Track()</text><!--MD5=[de68e8184bd64218e2c79e24a1b0d28a]
reverse link TB to BAT--><path d="M599.51,27.3564 C645.41,27.3564 707.88,27.3564 757.92,27.3564 " fill="none" id="TB-backto-BAT" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="594.28,27.3564,603.28,31.3564,599.28,27.3564,603.28,23.3564,594.28,27.3564" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="612.5" y="20.8516">CustomizerRemoved()</text><!--MD5=[94eec27b364eedefe4260f9931564d8a]
link TB to BTC--><path d="M536,46.4564 C536,68.4064 536,105.4264 536,129.5064 " fill="none" id="TB-to-BTC" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="536,134.7264,540,125.7264,536,129.7264,532,125.7264,536,134.7264" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="537" y="90.8516">RemovedBundle()</text><!--MD5=[88bd13fd3b2008d30df3d8d320a4906c]
@startuml rembundle_diagram

rectangle "BundleEvent" as BE
rectangle "BundleListener" as BL
'rectangle "BundleTracker" as BT
'rectangle "BundleTrackerPrivate" as BTP
rectangle "TrackedBundle" as TB
'rectangle "BundleContext" as BC
rectangle "BundleAbstractTracked" as BAT
rectangle "BundleTrackerCustomizer" as BTC

BE -> BL : Intercept event
BL -> TB : BundleChanged()
TB -> BAT : Track()
TB <- BAT: CustomizerRemoved()
TB -d-> BTC : RemovedBundle()

note bottom of BAT : Bundle is in map\nLeaving state mask\nIncrement count

@enduml

@startuml rembundle_diagram

rectangle "BundleEvent" as BE
rectangle "BundleListener" as BL
rectangle "TrackedBundle" as TB
rectangle "BundleAbstractTracked" as BAT
rectangle "BundleTrackerCustomizer" as BTC

BE -> BL : Intercept event
BL -> TB : BundleChanged()
TB -> BAT : Track()
TB <- BAT: CustomizerRemoved()
TB -d-> BTC : RemovedBundle()

note bottom of BAT : Bundle is in map\nLeaving state mask\nIncrement count

@enduml

PlantUML version 1.2022.0(Tue Jan 11 11:16:42 EST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>